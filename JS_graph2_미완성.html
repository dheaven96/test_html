<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="https://n.weather.naver.com/air/09140104">
    <title>날씨-데이터그래프2</title>

    <link rel="stylesheet" type="text/css" href="css/destyle.css"><!-- 브라우저 초기화 -->
</head>

<style>
    /* 1.현재 시간 구하기
       2.미세먼지 값 - 배열
       3.미세먼지 값을 스타일로 표현
       4.현재 시간 대 배열 표현 
    */
    section {width: 100%;}
    h1, h2 {text-align: center; padding-left: 100px; margin-top: 30px;}
    h1 {font-size: 24px; }
    h2 {font-size: 18px; margin-bottom: 20px;}

   .container {width: 50%; height: 250px; display: flex; margin: 0 auto; justify-content: center;}
   .graph_container {width: 20px; height: 250px; background-color: lightgray; display: flex; align-items: flex-end; border-radius: 5px; margin: 0 2px;}
   .graph {width: 20px; height: 10px; background-color: lightgreen; border-radius: 5px; transition: all 1s;}
   .graph_y {width: 300px; list-style: none; padding-right: 20px; box-sizing: border-box;}
   .graph_y p {text-align: right; height: 20%;}

   .time_container {width: 50%; height: 20px; display: flex; margin: 0 auto; justify-content: center;}
   .time {width: 20px; height: 10px; margin: 10px 5.9px 0; font-size: 12px; list-style: none; text-align: center;}
   .time_y {width: 300px; list-style: none; }

</style>

<body>
    <section>
        <h1>미세먼지 시간별 추이</h1>
        <h2>오늘 <span id="today_hour">17:00</span><span id="today_state">좋음 25</span></h2>

        <ul class="container">
            <li class="graph_y">
                <p>매우 나쁨</p>
                <p>나쁨</p>
                <p>보통</p>
                <p>좋음</p>
            </li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>
            <li class="graph_container"><span class="graph"></span></li>      
        </ul>  
    
        <ul class="time_container">
            <li class="time_y">
            </li>
            <li class="time">00</li> 
            <li class="time">01</li>
            <li class="time">02</li>
            <li class="time">03</li>
            <li class="time">04</li>
            <li class="time">05</li>
            <li class="time">06</li>
            <li class="time">07</li>
            <li class="time">08</li>
            <li class="time">09</li>
            <li class="time">10</li>
            <li class="time">11</li>
            <li class="time">12</li>
            <li class="time">13</li>
            <li class="time">14</li>
            <li class="time">15</li>
            <li class="time">16</li>
            <li class="time">17</li>
            <li class="time">18</li>
            <li class="time">19</li>
            <li class="time">20</li>
            <li class="time">21</li>
            <li class="time">22</li>
            <li class="time">23</li>               
        </ul> 
     
   </section>   
   
   <script>
       var todayDate = new Date(); // 현재 날짜 및 시간 객체
       var todayHour = todayDate.getHours();
       document.getElementById("today_hour").innerHTML = todayHour + ":00";

       var todayState = [25,27,45,36,50,75,77,80,90,150,120,175,236,288,300,254,145,134,62,70,42,34,23,13]; 
       var stateRandom = Math.ceil(Math.random() * 500);

       //미세먼지 데이터를 0~300 사이의 랜덤 값으로 발생시켜서 배열에 저장
       for (i=0; i<todayState.length; i++) {
          todayState[i] = Math.ceil(Math.random() * 300);
       }

        if (todayState[todayHour]>=0 && todayState[todayHour]<=50) {
          document.getElementById("today_state").innerHTML = " 좋음 " + todayState[todayHour];
          document.getElementById("today_state").style.color = "rgba(49,161,255,1)";
        }
        else if (todayState[todayHour]>51 && todayState[todayHour]<=100) {
          document.getElementById("today_state").innerHTML = " 보통 " + todayState[todayHour];
          document.getElementById("today_state").style.color = "rgba(0,199,59,1)";
        }
        else if (todayState[todayHour]>100 && todayState[todayHour]<=200) {
          document.getElementById("today_state").innerHTML = " 나쁨 " + todayState[todayHour];
          document.getElementById("today_state").style.color = "rgba(255,199,0,1)";
        }
        else if (todayState[todayHour]>200 && todayState[todayHour]<=300) {
          document.getElementById("today_state").innerHTML = " 매우 나쁨 " + todayState[todayHour];
          document.getElementById("today_state").style.color = "rgba(253,101,13,1)";
        }
        




       document.getElementsByClassName("graph_container")[todayHour].style.backgroundColor = "gray";

       for (i=0; i<todayState.length; i++) {
           // 각 미세먼지 데이터에 따라 그래프 높이로 전환  
          document.getElementsByClassName("graph")[i].style.height = todayState[i] / 2 + "px";

          // 각 미세먼지 데이터에 따라 그래프 색상 결정
          if (todayState[i]>0 && todayState[i]<=50) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(49,161,255,1)";
          }
          else if (todayState[i]>50 && todayState[i]<=100) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(0,199,59,1)";
          }
          else if (todayState[i]>100 && todayState[i]<=150) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(173,195,47,1)";
          }
          else if (todayState[i]>150 && todayState[i]<=200) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(255,199,0,1)";
          }
          else if (todayState[i]>200 && todayState[i]<=300) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(253,101,13,1)";
          }
          else if (todayState[i]>300 && todayState[i]<=500) {
            document.getElementsByClassName("graph")[i].style.backgroundColor = "rgba(230,71,70,1)";
          }

       }

   </script>
</body>


</html>
